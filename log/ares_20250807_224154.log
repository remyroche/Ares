2025-08-07 22:41:54,603 - AresTradingSystem - INFO - ‚úÖ Enhanced Logger initialization completed successfully
2025-08-07 22:41:54,616 - AresTradingSystem.System - INFO - Environment configuration loaded successfully. Trading Environment: PAPER, Exchange: BINANCE
2025-08-07 22:41:56,626 - AresTradingSystem.System.SignalHandler - INFO - Initializing Signal Handler...
2025-08-07 22:41:56,626 - AresTradingSystem.System.SignalHandler - INFO - Signal configuration loaded successfully
2025-08-07 22:41:56,626 - AresTradingSystem.System.SignalHandler - INFO - Configuration validation successful
2025-08-07 22:41:56,627 - AresTradingSystem.System.SignalHandler - INFO - Registered SIGTERM handler
2025-08-07 22:41:56,627 - AresTradingSystem.System.SignalHandler - INFO - Registered SIGINT handler
2025-08-07 22:41:56,627 - AresTradingSystem.System.SignalHandler - INFO - Signal handlers registered successfully
2025-08-07 22:41:56,627 - AresTradingSystem.System.SignalHandler - INFO - ‚úÖ Signal Handler initialization completed successfully
2025-08-07 22:41:56,629 - AresTradingSystem.System.SignalHandler - INFO - Shutdown callback registered
2025-08-07 22:42:02,319 - AresTradingSystem.System - INFO - Initializing Market Regime Classification Step...
2025-08-07 22:42:02,320 - AresTradingSystem.System - INFO - Market Regime Classification Step initialized successfully
2025-08-07 22:42:02,320 - AresTradingSystem.System - INFO - üîÑ Executing Market Regime Classification...
2025-08-07 22:42:02,321 - AresTradingSystem.System - INFO - üìÅ Loading pre-consolidated data from: data_cache/aggtrades_BINANCE_ETHUSDT_consolidated.parquet
2025-08-07 22:42:03,155 - AresTradingSystem.System - INFO - ‚úÖ Loaded consolidated trade data: 17744326 records
2025-08-07 22:42:03,156 - AresTradingSystem.System - INFO - üîÑ Converting trade data to OHLCV format...
2025-08-07 22:42:10,569 - AresTradingSystem.System - INFO - ‚úÖ Converted to OHLCV: 879 records
2025-08-07 22:42:10,569 - AresTradingSystem.System - INFO - Classifying market regimes for ETHUSDT on BINANCE...
2025-08-07 22:42:22,287 - AresTradingSystem.System - INFO - Regime classification completed. Found 1 distinct regimes
2025-08-07 22:42:22,289 - AresTradingSystem.System - INFO - ‚úÖ Market regime classification completed. Results saved to data/training/BINANCE_ETHUSDT_regime_classification.json
2025-08-07 22:42:22,307 - AresTradingSystem.System - INFO - Initializing Regime Data Splitting Step...
2025-08-07 22:42:22,307 - AresTradingSystem.System - INFO - Regime Data Splitting Step initialized successfully
2025-08-07 22:42:22,307 - AresTradingSystem.System - INFO - üîÑ Executing Regime Data Splitting...
2025-08-07 22:42:22,307 - AresTradingSystem.System - INFO - Loading prepared data from: data/training/ETHUSDT_prepared_data.pkl
2025-08-07 22:42:22,311 - AresTradingSystem.System - INFO - ‚úÖ Loaded prepared data: (40190, 17)
2025-08-07 22:42:22,312 - AresTradingSystem.System - INFO - Splitting data by regimes for ETHUSDT on BINANCE...
2025-08-07 22:42:22,312 - AresTradingSystem.System - WARNING - Data length (40190) doesn't match regime sequence length (854)
2025-08-07 22:42:22,342 - AresTradingSystem.System - INFO - Regime 'SIDEWAYS': 854 records
2025-08-07 22:42:22,343 - AresTradingSystem.System - INFO - High-data regimes: ['SIDEWAYS']
2025-08-07 22:42:22,343 - AresTradingSystem.System - INFO - Low-data regimes: []
2025-08-07 22:42:22,343 - AresTradingSystem.System - INFO - Other regimes: []
2025-08-07 22:42:22,344 - AresTradingSystem.System - INFO - ‚úÖ Regime data splitting completed. Results saved to data/training/regime_data
2025-08-07 22:42:22,521 - AresTradingSystem.System - INFO - Initializing Analyst Specialist Training Step...
2025-08-07 22:42:22,522 - AresTradingSystem.System - INFO - Analyst Specialist Training Step initialized successfully
2025-08-07 22:42:22,522 - AresTradingSystem.System - INFO - üîÑ Executing Analyst Specialist Training...
2025-08-07 22:42:22,523 - AresTradingSystem.System - INFO - ‚úÖ Loaded combined feature data: (951, 11)
2025-08-07 22:42:22,523 - AresTradingSystem.System - INFO - Training specialist models for regime: combined
2025-08-07 22:42:22,523 - AresTradingSystem.System - INFO - Training specialist models for regime: combined
2025-08-07 22:42:22,523 - AresTradingSystem.System - INFO - Dropping datetime columns: ['timestamp']
2025-08-07 22:42:22,525 - AresTradingSystem.System - INFO - Using 9 feature columns: ['open', 'high', 'low', 'close', 'volume']...
2025-08-07 22:42:22,692 - AresTradingSystem.System - INFO - ‚úÖ Random Forest trained successfully for combined
2025-08-07 22:42:22,997 - AresTradingSystem.System - INFO - ‚úÖ LightGBM trained successfully for combined
2025-08-07 22:42:23,245 - AresTradingSystem.System - INFO - ‚úÖ XGBoost trained successfully for combined
2025-08-07 22:42:23,344 - AresTradingSystem.System - INFO - ‚úÖ Neural Network trained successfully for combined
2025-08-07 22:42:23,448 - AresTradingSystem.System - INFO - ‚úÖ SVM trained successfully for combined
2025-08-07 22:42:23,449 - AresTradingSystem.System - INFO - Trained 5 models for regime combined
2025-08-07 22:42:23,454 - AresTradingSystem.System - INFO - ‚úÖ Saved main analyst model to data/training/BINANCE_ETHUSDT_analyst_model.pkl
2025-08-07 22:42:23,454 - AresTradingSystem.System - INFO - ‚úÖ Saved model metadata to data/training/BINANCE_ETHUSDT_analyst_model_metadata.json
2025-08-07 22:42:23,455 - AresTradingSystem.System - INFO - ‚úÖ Saved training history to data/training/BINANCE_ETHUSDT_analyst_training_history.json
2025-08-07 22:42:23,472 - AresTradingSystem.System - INFO - ‚úÖ Analyst specialist training completed. Results saved to data/training/analyst_models
2025-08-07 22:42:28,273 - AresTradingSystem.System - INFO - Using device: MPS for PyTorch operations.
2025-08-07 22:42:28,274 - AresTradingSystem.System - INFO - Initializing Analyst Enhancement Step...
2025-08-07 22:42:28,274 - AresTradingSystem.System - INFO - Analyst Enhancement Step initialized successfully.
2025-08-07 22:42:28,274 - AresTradingSystem.System - INFO - üîÑ Executing Analyst Enhancement...
2025-08-07 22:42:28,299 - AresTradingSystem.System - INFO - --- Enhancing models for regime: BULL ---
2025-08-07 22:42:28,299 - AresTradingSystem.System - INFO - Loading data for regime 'BULL'...
2025-08-07 22:42:28,299 - AresTradingSystem.System - INFO - Looking for regime data in: data/training/regime_data
2025-08-07 22:42:28,300 - AresTradingSystem.System - INFO - Current working directory: /Users/remyroche/Documents/Ares
2025-08-07 22:42:28,300 - AresTradingSystem.System - INFO - Looking for data file: data/training/regime_data/BINANCE_ETHUSDT_BULL_data.pkl
2025-08-07 22:42:28,300 - AresTradingSystem.System - INFO - File exists: True
2025-08-07 22:42:28,300 - AresTradingSystem.System - INFO - Loaded data shape: (1000, 3)
2025-08-07 22:42:28,300 - AresTradingSystem.System - INFO - Available columns: ['value', 'regime', 'index']
2025-08-07 22:42:28,301 - AresTradingSystem.System - INFO - After removing non-numeric columns: (1000, 2)
2025-08-07 22:42:28,301 - AresTradingSystem.System - INFO - Numeric columns: ['value', 'index']
2025-08-07 22:42:28,301 - AresTradingSystem.System - WARNING - No target column found in regime data. Available columns: ['value', 'index']
2025-08-07 22:42:28,301 - AresTradingSystem.System - WARNING - Creating dummy target - this may not be suitable for training
2025-08-07 22:42:28,304 - AresTradingSystem.System - INFO - Data loaded and split: X_train shape (800, 2), X_val shape (200, 2)
2025-08-07 22:42:28,305 - AresTradingSystem.System - INFO - Enhancing xgboost for BULL...
2025-08-07 22:42:28,305 - AresTradingSystem.System - INFO - Original model accuracy: 0.8399370026525199
2025-08-07 22:42:28,305 - AresTradingSystem.System - INFO - Running Optuna HPO with pruning for xgboost...
2025-08-07 22:44:51,535 - AresTradingSystem.System - INFO - HPO complete. Best score: 0.5650
2025-08-07 22:44:51,661 - AresTradingSystem.System - INFO - Selecting optimal features using SHAP...
2025-08-07 22:44:56,733 - AresTradingSystem.System - WARNING - SHAP analysis failed: Your currently installed version of Keras is Keras 3, but this is not yet supported in Transformers. Please install the backwards-compatible tf-keras package with `pip install tf-keras`.. Using all features.
2025-08-07 22:44:56,735 - AresTradingSystem.System - INFO - Retraining final model with 2 optimal features...
2025-08-07 22:44:58,060 - AresTradingSystem.System - INFO - Enhanced model accuracy: 0.5650
2025-08-07 22:44:58,061 - AresTradingSystem.System - INFO - Enhancing svm for BULL...
2025-08-07 22:44:58,061 - AresTradingSystem.System - INFO - Original model accuracy: 0.5370523872679045
2025-08-07 22:44:58,061 - AresTradingSystem.System - INFO - Running Optuna HPO with pruning for svm...
2025-08-07 22:44:58,077 - AresTradingSystem.System - ERROR - ‚ùå Error in Analyst Enhancement after 149.80s: BaseLibSVM.fit() got an unexpected keyword argument 'eval_set'
Traceback (most recent call last):
  File "/Users/remyroche/Documents/Ares/src/training/steps/step6_analyst_enhancement.py", line 105, in execute
    enhanced_model_package = await self._enhance_single_model(
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/remyroche/Documents/Ares/src/training/steps/step6_analyst_enhancement.py", line 235, in _enhance_single_model
    )
      
  File "/Users/remyroche/Documents/Ares/src/training/steps/step6_analyst_enhancement.py", line 377, in _apply_hyperparameter_optimization
    self, model: Any, model_name: str, X_train: pd.DataFrame, X_val: pd.DataFrame
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/concurrent/futures/thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/optuna/study/study.py", line 489, in optimize
    _optimize(
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/optuna/study/_optimize.py", line 101, in _optimize
    f.result()
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/concurrent/futures/_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/concurrent/futures/thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/optuna/study/_optimize.py", line 161, in _optimize_sequential
    frozen_trial = _run_trial(study, func, catch)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/optuna/study/_optimize.py", line 253, in _run_trial
    raise func_err
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/optuna/study/_optimize.py", line 201, in _run_trial
    value_or_values = func(trial)
                      ^^^^^^^^^^^
  File "/Users/remyroche/Documents/Ares/src/training/steps/step6_analyst_enhancement.py", line 365, in objective
    )
      
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/sklearn/base.py", line 1365, in wrapper
    return fit_method(estimator, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseLibSVM.fit() got an unexpected keyword argument 'eval_set'
