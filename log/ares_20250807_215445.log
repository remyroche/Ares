2025-08-07 21:54:45,512 - AresTradingSystem - INFO - ‚úÖ Enhanced Logger initialization completed successfully
2025-08-07 21:54:45,520 - AresTradingSystem.System - INFO - Environment configuration loaded successfully. Trading Environment: PAPER, Exchange: BINANCE
2025-08-07 21:54:45,850 - AresTradingSystem.System.SignalHandler - INFO - Initializing Signal Handler...
2025-08-07 21:54:45,850 - AresTradingSystem.System.SignalHandler - INFO - Signal configuration loaded successfully
2025-08-07 21:54:45,850 - AresTradingSystem.System.SignalHandler - INFO - Configuration validation successful
2025-08-07 21:54:45,850 - AresTradingSystem.System.SignalHandler - INFO - Registered SIGTERM handler
2025-08-07 21:54:45,851 - AresTradingSystem.System.SignalHandler - INFO - Registered SIGINT handler
2025-08-07 21:54:45,851 - AresTradingSystem.System.SignalHandler - INFO - Signal handlers registered successfully
2025-08-07 21:54:45,851 - AresTradingSystem.System.SignalHandler - INFO - ‚úÖ Signal Handler initialization completed successfully
2025-08-07 21:54:45,852 - AresTradingSystem.System.SignalHandler - INFO - Shutdown callback registered
2025-08-07 21:54:46,953 - AresTradingSystem.System - INFO - Initializing Market Regime Classification Step...
2025-08-07 21:54:46,953 - AresTradingSystem.System - INFO - Market Regime Classification Step initialized successfully
2025-08-07 21:54:46,953 - AresTradingSystem.System - INFO - üîÑ Executing Market Regime Classification...
2025-08-07 21:54:46,953 - AresTradingSystem.System - INFO - üìÅ Loading pre-consolidated data from: data_cache/aggtrades_BINANCE_ETHUSDT_consolidated.parquet
2025-08-07 21:54:47,223 - AresTradingSystem.System - INFO - ‚úÖ Loaded consolidated trade data: 17744326 records
2025-08-07 21:54:47,223 - AresTradingSystem.System - INFO - üîÑ Converting trade data to OHLCV format...
2025-08-07 21:54:48,339 - AresTradingSystem.System - INFO - ‚úÖ Converted to OHLCV: 879 records
2025-08-07 21:54:48,340 - AresTradingSystem.System - INFO - Classifying market regimes for ETHUSDT on BINANCE...
2025-08-07 21:54:48,341 - AresTradingSystem.System - INFO - Regime classification completed. Found 0 distinct regimes
2025-08-07 21:54:48,341 - AresTradingSystem.System - INFO - ‚úÖ Market regime classification completed. Results saved to data/training/BINANCE_ETHUSDT_regime_classification.json
2025-08-07 21:54:48,353 - AresTradingSystem.System - INFO - Initializing Regime Data Splitting Step...
2025-08-07 21:54:48,353 - AresTradingSystem.System - INFO - Regime Data Splitting Step initialized successfully
2025-08-07 21:54:48,353 - AresTradingSystem.System - INFO - üîÑ Executing Regime Data Splitting...
2025-08-07 21:54:48,357 - AresTradingSystem.System - INFO - ‚úÖ Extracted klines data: (60367, 5)
2025-08-07 21:54:48,357 - AresTradingSystem.System - INFO - Splitting data by regimes for ETHUSDT on BINANCE...
2025-08-07 21:54:48,357 - AresTradingSystem.System - INFO - Data shape: (60367, 5)
2025-08-07 21:54:48,357 - AresTradingSystem.System - WARNING - No regime sequence found, creating default sequence
2025-08-07 21:54:48,519 - AresTradingSystem.System - INFO - Regime 'BULL': 60367 records
2025-08-07 21:54:48,519 - AresTradingSystem.System - INFO - High-data regimes: ['BULL']
2025-08-07 21:54:48,519 - AresTradingSystem.System - INFO - Low-data regimes: []
2025-08-07 21:54:48,519 - AresTradingSystem.System - INFO - Other regimes: []
2025-08-07 21:54:48,521 - AresTradingSystem.System - INFO - ‚úÖ Regime data splitting completed. Results saved to data/training/regime_data
2025-08-07 21:55:05,671 - AresTradingSystem.System - INFO - Initializing Analyst Specialist Training Step...
2025-08-07 21:55:05,672 - AresTradingSystem.System - INFO - Analyst Specialist Training Step initialized successfully
2025-08-07 21:55:05,672 - AresTradingSystem.System - INFO - üîÑ Executing Analyst Specialist Training...
2025-08-07 21:55:05,673 - AresTradingSystem.System - INFO - Training specialist models for regime: BULL
2025-08-07 21:55:05,673 - AresTradingSystem.System - INFO - Training specialist models for regime: BULL
2025-08-07 22:01:29,431 - AresTradingSystem.System - INFO - Trained 5 models for regime BULL
2025-08-07 22:01:29,440 - AresTradingSystem.System - INFO - ‚úÖ Analyst specialist training completed. Results saved to data/training/analyst_models
2025-08-07 22:01:32,216 - AresTradingSystem.System - INFO - Using device: MPS for PyTorch operations.
2025-08-07 22:01:32,216 - AresTradingSystem.System - INFO - Initializing Analyst Enhancement Step...
2025-08-07 22:01:32,216 - AresTradingSystem.System - INFO - Analyst Enhancement Step initialized successfully.
2025-08-07 22:01:32,217 - AresTradingSystem.System - INFO - üîÑ Executing Analyst Enhancement...
2025-08-07 22:01:32,227 - AresTradingSystem.System - INFO - --- Enhancing models for regime: BULL ---
2025-08-07 22:01:32,227 - AresTradingSystem.System - INFO - Loading data for regime 'BULL'...
2025-08-07 22:01:32,230 - AresTradingSystem.System - WARNING - No 'label' column found, creating dummy target
2025-08-07 22:01:32,231 - AresTradingSystem.System - INFO - Data loaded and split: X_train shape (48293, 2), X_val shape (12074, 2)
2025-08-07 22:01:32,231 - AresTradingSystem.System - INFO - Enhancing xgboost for BULL...
2025-08-07 22:01:32,231 - AresTradingSystem.System - INFO - Original model accuracy: 0.8399370026525199
2025-08-07 22:01:32,231 - AresTradingSystem.System - INFO - Running Optuna HPO with pruning for xgboost...
2025-08-07 22:03:54,127 - AresTradingSystem.System - INFO - HPO complete. Best score: 0.5051
2025-08-07 22:03:54,888 - AresTradingSystem.System - INFO - Selecting optimal features using SHAP...
2025-08-07 22:03:54,888 - AresTradingSystem.System - ERROR - ‚ùå Error in Analyst Enhancement after 142.67s: module 'shap' has no attribute 'TreeExplainer'
Traceback (most recent call last):
  File "/Users/remyroche/Documents/Ares/src/training/steps/step6_analyst_enhancement.py", line 104, in execute
    enhanced_model_package = await self._enhance_single_model(
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/remyroche/Documents/Ares/src/training/steps/step6_analyst_enhancement.py", line 214, in _enhance_single_model
    optimal_features, shap_summary = await self._select_optimal_features(
                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/remyroche/Documents/Ares/src/training/steps/step6_analyst_enhancement.py", line 348, in _select_optimal_features
    explainer = shap.TreeExplainer(model)
                ^^^^^^^^^^^^^^^^^^
AttributeError: module 'shap' has no attribute 'TreeExplainer'
